function(fortranize file)
    unset(result)
    unset(basename)
    file(STRINGS "${file}" lines)
    get_filename_component(basename ${file} NAME_WE)
    foreach(i IN LISTS lines)
        string(REGEX REPLACE "^/\\* (#undef .*) \\*/$" "! \\1" i "${i}")
        set(result "${result}${i}\n")
    endforeach()
    file(WRITE "${CMAKE_CURRENT_BINARY_DIR}/${basename}f.h" "${result}")
endfunction()

