# --------------------------
# Construction des Tests
# --------------------------

if (MPI_C_COMPILER)
    set(CMAKE_C_COMPILER ${MPI_C_COMPILER})
endif()

if (MPI_CXX_COMPILER)
  set(CMAKE_CXX_COMPILER ${MPI_CXX_COMPILER})
endif()

if (MPI_Fortran_COMPILER)
    set(CMAKE_Fortran_COMPILER ${MPI_Fortran_COMPILER})
endif()

unset(LINK_LIBRARIES)

if (PDM_ENABLE_STATIC_Fortran_INTERFACE OR PDM_ENABLE_SHARED_Fortran_INTERFACE)
  if (PDM_ENABLE_STATIC)
    if (PDM_ENABLE_EXTENSION_PDMA)
      list(APPEND LINK_LIBRARIES
         pdmaf_static)
    endif()
    list(APPEND LINK_LIBRARIES pdmf_static)
    if (PDM_ENABLE_EXTENSION_PDMA)
      list(APPEND LINK_LIBRARIES
         pdmaf_static)
    endif()
  else ()
    if (PDM_ENABLE_EXTENSION_PDMA)
      list(APPEND LINK_LIBRARIES
         pdmaf_shared)
    endif()
    list(APPEND LINK_LIBRARIES pdmf_shared)
    if (PDM_ENABLE_EXTENSION_PDMA)
      list(APPEND LINK_LIBRARIES
         pdmaf_shared)
    endif()
  endif()
endif()

if (PDM_ENABLE_STATIC)
 if (PDM_ENABLE_EXTENSION_PDMA)
  list(APPEND LINK_LIBRARIES
       pdma_static)
 endif()
 list(APPEND LINK_LIBRARIES
      pdm_static
      pdm_mpi_static
      ${COMMON_LIBRARIES})
 if (PDM_ENABLE_EXTENSION_PDMA)
  list(APPEND LINK_LIBRARIES
       pdma_static)
 endif()
else ()
 list(APPEND LINK_LIBRARIES
      pdm_shared
      pdm_mpi_shared ${COMMON_LIBRARIES})
 if (PDM_ENABLE_EXTENSION_PDMA)
  list(APPEND LINK_LIBRARIES
       pdma_shared)
 endif()
endif()

if (OPENMP_FOUND)
  list(APPEND LINK_LIBRARIES ${OpenMP_C_FLAGS})
endif()

if (PDM_ENABLE_CUDA)
  list(APPEND LINK_LIBRARIES pdm_gpu)
endif()

get_target_property(PDM_INC pdm INCLUDE_DIRECTORIES)

file (COPY ${CMAKE_CURRENT_SOURCE_DIR}/meshes DESTINATION ${CMAKE_CURRENT_BINARY_DIR})
if (PDM_ENABLE_EXTENSION_PDMA)
  file (COPY ${CMAKE_CURRENT_SOURCE_DIR}/meshes DESTINATION "${CMAKE_CURRENT_BINARY_DIR}/../extensions/paradigma/test/")
endif()

# Test pdm_t_part_cube
# --------------

set (MPIEXEC_MAX_NUMPROCS 2)
set (MPIEXEC_EXECUTABLE mpirun)

include(TestCreate)

if(PDM_ENABLE_UNIT_TEST)
  file(GLOB_RECURSE __test_files
       CONFIGURE_DEPENDS "${CMAKE_CURRENT_SOURCE_DIR}/../src/*.test.cpp")
  test_cpp_unit_create(pdm_t_unit_test ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK SOURCES ${__test_files} )
endif()

if (PDM_HAVE_PARMETIS OR PDM_HAVE_PTSCOTCH)
  test_c_create (pdm_t_plane_agglo 2  PDM_LIST_TEST PDM_LIST_NRANK)
  if (PDM_HAVE_PARMETIS)
    test_c_create (pdm_t_partitioning_dcube ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
  endif()
endif()
test_c_create (pdm_t_part1_to_selected_part2_from_mesh_location 4 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_distant_neighbor3 4 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_part_dcube ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
# test_c_create (pdm_t_part_dcube_agglo ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_gnum_nuplet ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_part_dcube_perfo_btp ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_part_dcube_nodal ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dmesh_nodal_to_dmesh 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dmesh_to_dmesh_nodal 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dmesh_extract_nodal 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dmesh_extract_nodal_2d 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dmesh_extract_3d 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dmesh_extract_2d 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dmesh_extract_1d 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_point_merge 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_part_extension 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_partitioning_dcube_nodal 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_multipart ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_global_mean ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_global_reduce ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_writer_ensight_3d ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_writer_ensight_moving_mesh_3d ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_writer_ensight_variable_mesh_3d ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_cellface_orient ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_gnum 4 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_gen_gnum 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_gnum_location 4 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_gnum_with_merge 4 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dist 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dist_nodal 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dface_vtx_from_dface_edge 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dist_ho 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dist_strip 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dist_rocket 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dist_axitransbump 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dist_bl 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dist_cloud_surf_from_stl 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_knn_cube ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_create_edge_gnum 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_mesh_location_dcube ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_mesh_location_disjoint_cubes ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_mesh_location_multisection ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_mesh_location_poly_surf ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_mesh_location_from_file 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_mesh_location_ho 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_plane_meshes_intersect 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dsurf_mesh_gen 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_generate_mesh 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_polysurf_extrusion 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dcube_nodal_gen 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_extract_part_from_part 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_compute_part_edges 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_extract_part 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_extract_part_vtx 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_extract_part_nodal 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_extract_part_from_target 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_extract_surf_part 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_field_cell_to_vtx 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_field_cell_to_vtx_nodal 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_edge_upwind_and_downwind 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_overlay_from_vol_mesh 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_join_domains 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_part_domain_interface_vtx_to_edge 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_domain_interface_vtx_translate 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_mesh_intersection_surf_surf 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_mesh_intersection_vol_surf 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_mesh_intersection_vol_line 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_mesh_intersection_vol_vol 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_mesh_intersection_surf_line 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_mixing_plane 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dist_cube_nodal 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_part_mesh_nodal_to_part_mesh 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_cellface_orient_poly 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_mesh_adapt 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_ptb ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_par_octree ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_octree ${MPIEXEC_MAX_NUMPROCS}  PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_doctree ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
# test_c_create (pdm_t_doctree_cloud_sphere ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_kdtree ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_point_tree ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_kdtree_points_inside_ball ${MPIEXEC_MAX_NUMPROCS} PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_par_octree_shared ${MPIEXEC_MAX_NUMPROCS}  PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_closest_points_small 1  PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_closest_points ${MPIEXEC_MAX_NUMPROCS}  PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_distant_neighbor 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_distant_neighbor_nomatch 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_distant_neighbor2 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_order 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_gnum_from_hash_values 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_plane_intersect_unit 2 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_plane_meshes_intersect_unit 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_intersect_line_box 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_intersect_volume_box 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_linear_programming_box_box 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_box_tree_intersect_volume_box 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dbbtree_intersect_volume_box 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_volume_intersect_back_mesh 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_mesh_extract 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_connect_domain 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_part_to_block_geom 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_multipart_0d 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_multipart_1d 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_multipart_1d_nodal 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_para_clustering 2 PDM_LIST_TEST PDM_LIST_NRANK)
# test_c_create (pdm_t_part_extension_1d 1 PDM_LIST_TEST PDM_LIST_NRANK)
# test_c_create (pdm_t_part_extension_2d 2 PDM_LIST_TEST PDM_LIST_NRANK)

test_c_create (pdm_t_closest_points_1_point 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_dist_ridge 1  PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_box_tree 1  PDM_LIST_TEST PDM_LIST_NRANK)
# test_c_create (pdm_t_multi_block_merge 1  PDM_LIST_TEST PDM_LIST_NRANK)

test_c_create (pdm_t_ho_ordering 1  PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_mpi_shared_allgather 1 PDM_LIST_TEST PDM_LIST_NRANK)

#TODO: Not fully implemented
#test_c_create (pdm_t_win_shared 1 PDM_LIST_TEST PDM_LIST_NRANK)

#test_c_create (test_mpi_morton 2 PDM_LIST_TEST PDM_LIST_NRANK)

test_c_create (pdm_t_point_in_polygon 1  PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_line_intersection 1  PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_mesh_check 1  PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_part_to_part 2  PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_ho_location 1 PDM_LIST_TEST PDM_LIST_NRANK)
# test_c_create (pdm_t_ho_location_projection 1  PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_subdivision_bezier_triangle 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_projection_back_mesh 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_part_to_block_reverse_cleanup 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_part_to_block_reverse_merge   1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_subdivision_bezier_curve 1 PDM_LIST_TEST PDM_LIST_NRANK)

test_c_create (pdm_t_ho_bezier_intersect 1 PDM_LIST_TEST PDM_LIST_NRANK)

test_c_create (pdm_t_sphere_vol_gen 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_separate_groups 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_fetch_back_mesh 1 PDM_LIST_TEST PDM_LIST_NRANK)

test_c_create (pdm_t_tree_intersection 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_tree_intersection_perf 1 PDM_LIST_TEST PDM_LIST_NRANK)

test_c_create (pdm_t_simultaneous_trees 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_point_location_nodal 1  PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_projection_point_cloud_surf 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_reader_gamma 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_reader_vtk 1 PDM_LIST_TEST PDM_LIST_NRANK)

test_c_create (pdm_t_icoball 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_hollow_ball 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_extrude_polyline 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_fill_between_polylines 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_morton_order 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_para_octree 1 PDM_LIST_TEST PDM_LIST_NRANK)

test_c_create (pdm_t_triangle 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_bezier_triangle_location 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_intersect_tetrahedra 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_triangles_intersect 1 PDM_LIST_TEST PDM_LIST_NRANK)

test_c_create (pdm_t_unit_tetra_intersect_triangle 1 PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_mesh_intersection_surf_surf_atomic 1 PDM_LIST_TEST PDM_LIST_NRANK)

test_c_create (pdm_t_newton_ho 1  PDM_LIST_TEST PDM_LIST_NRANK)
test_c_create (pdm_t_svd 1  PDM_LIST_TEST PDM_LIST_NRANK)


if (PDM_ENABLE_PYTHON_BINDINGS)
   test_python_create (pdm_t_part_to_part_p 2 PDM_LIST_TEST PDM_LIST_NRANK)
   add_dependencies (pdm_t_part_to_part_p Pypdm)
   test_python_create (test_demr 2 PDM_LIST_TEST PDM_LIST_NRANK)
   add_dependencies (test_demr Pypdm)
   test_python_create (pdm_t_mesh_gen_demo_p 2 PDM_LIST_TEST PDM_LIST_NRANK)
   add_dependencies (pdm_t_mesh_gen_demo_p Pypdm)
   test_python_create (pdm_t_gnum_p 2 PDM_LIST_TEST PDM_LIST_NRANK)
   add_dependencies (pdm_t_gnum_p Pypdm)
endif()

if (PDM_ENABLE_STATIC_Fortran_INTERFACE OR PDM_ENABLE_SHARED_Fortran_INTERFACE)
  test_fortran_create (pdm_t_closest_points_f 2 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_mesh_location_f 1 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_part_to_block_f 1 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_block_to_part_f 1 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_dcube_gen_f 1 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_plane_intersect_unit_f 1 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_global_reduce_f 2 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_mpi_comm_f2c 2 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_dist_f 2 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_gnum_f 2 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_part_f 2 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_writer_f 2 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_mesh_check_f 1 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_part_to_part_f 2 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_gnum_location_f 2 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_part_extension_f 2 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_sphere_surf_gen_f 1 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_multipart_f 2 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_mesh_nodal_cellvtx_f 2 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_part_mesh_nodal_cellvtx_f 2 PDM_LIST_TEST PDM_LIST_NRANK)
  test_fortran_create (pdm_t_generate_mesh_f 2 PDM_LIST_TEST PDM_LIST_NRANK)
  # test_fortran_create (pdm_t_io  2 PDM_LIST_TEST PDM_LIST_NRANK)
endif()

add_subdirectory(tutorial)

set (PDM_LIST_TEST ${PDM_LIST_TEST} PARENT_SCOPE )
set (PDM_LIST_NRANK ${PDM_LIST_NRANK} PARENT_SCOPE )
